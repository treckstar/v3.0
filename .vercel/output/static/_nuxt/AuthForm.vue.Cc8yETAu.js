import{l as M,d as D,ae as P,o as Z,a as q,r as V,Q as B,b as c,c as f,ai as y,b9 as G,bk as L,D as Q,as as T,ao as H,ap as N,N as K,n as v,E as u,g as U,f as b,j as z,t as I,e as W,F as R,ag as Y,ah as S,aj as O,w as k,av as X,bl as _,ab as ee,an as te,bm as ae,bn as ne}from"./entry.BA3wuCO8.js";import{_ as se}from"./Divider.CqiBHo-c.js";class j extends Error{constructor(i){super(i),this.message=i,Object.setPrototypeOf(this,j.prototype)}}const re=D({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:i,emit:r}){const l=P("$Rhth7mCCjM"),d=L(`form-${l}`);Z(()=>{d.on(async t=>{var o;t.type!=="submit"&&((o=e.validateOn)!=null&&o.includes(t.type))&&await n(t.path,{silent:!0})})}),q(()=>{d.reset()});const a=V([]);B("form-errors",a),B("form-events",d);const $=V({});B("form-inputs",$);async function w(){let t=await e.validate(e.state);if(e.schema)if(ue(e.schema))t=t.concat(await ce(e.state,e.schema));else if(ie(e.schema))t=t.concat(await le(e.state,e.schema));else if(me(e.schema))t=t.concat(await fe(e.state,e.schema));else if(ve(e.schema))t=t.concat(await ye(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function n(t,o={silent:!1}){let m=t;if(t&&!Array.isArray(t)&&(m=[t]),m){const h=a.value.filter(p=>!m.includes(p.path)),E=(await w()).filter(p=>m.includes(p.path));a.value=h.concat(E)}else a.value=await w();if(a.value.length>0){if(o.silent)return!1;throw new j(`Form validation failed: ${JSON.stringify(a.value,null,2)}`)}return e.state}async function g(t){var m;const o=t;try{(m=e.validateOn)!=null&&m.includes("submit")&&await n();const h={...o,data:e.state};r("submit",h)}catch(h){if(!(h instanceof j))throw h;const E={...o,errors:a.value.map(p=>({...p,id:$.value[p.path]}))};r("error",E)}}return i({validate:n,errors:a,setErrors(t,o){a.value=t,o?a.value=a.value.filter(m=>m.path!==o).concat(t):a.value=t},async submit(){await g(new Event("submit"))},getErrors(t){return t?a.value.filter(o=>o.path===t):a.value},clear(t){t?a.value=a.value.filter(o=>o.path!==t):a.value=[]}}),{onSubmit:g}}});function ie(e){return e.validate&&e.__isYupSchema__}function oe(e){return e.inner!==void 0}async function le(e,i){try{return await i.validate(e,{abortEarly:!1}),[]}catch(r){if(oe(r))return r.inner.map(l=>({path:l.path??"",message:l.message}));throw r}}function ue(e){return e.parse!==void 0}async function ce(e,i){const r=await i.safeParseAsync(e);return r.success===!1?r.error.issues.map(l=>({path:l.path.join("."),message:l.message})):[]}function me(e){return e.validateAsync!==void 0&&e.id!==void 0}function de(e){return e.isJoi===!0}async function fe(e,i){try{return await i.validateAsync(e,{abortEarly:!1}),[]}catch(r){if(de(r))return r.details.map(l=>({path:l.path.join("."),message:l.message}));throw r}}function ve(e){return e._parse!==void 0}async function ye(e,i){const r=await i._parse(e);return r.issues?r.issues.map(l=>{var d;return{path:((d=l.path)==null?void 0:d.map(a=>a.key).join("."))||"",message:l.message}}):[]}function he(e,i,r,l,d,a){return c(),f("form",{onSubmit:i[0]||(i[0]=G((...$)=>e.onSubmit&&e.onSubmit(...$),["prevent"]))},[y(e.$slots,"default")],32)}const pe=M(re,[["render",he]]),$e=D({inheritAttrs:!1,__name:"AuthForm",props:{title:{type:String,default:void 0},description:{type:String,default:void 0},icon:{type:String,default:void 0},align:{type:String,default:"bottom"},loading:{type:Boolean,default:!1},fields:{type:Array,default:()=>[]},providers:{type:Array,default:()=>[]},submitButton:{type:Object,default:()=>({})},schema:{type:Object,default:void 0},validate:{type:[Function,Array],default:void 0},validateOn:{type:Array,default:()=>["submit"]},divider:{type:String,default:"or"},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{expose:i}){const r=e,l=Q(()=>({wrapper:"w-full max-w-sm space-y-6",base:"",container:T("gap-y-6 flex flex-col",r.align==="top"&&"flex-col-reverse"),title:"text-2xl text-gray-900 dark:text-white font-bold",description:"text-gray-500 dark:text-gray-400 mt-1",icon:{wrapper:"mb-2 pointer-events-none",base:"w-8 h-8 flex-shrink-0 text-gray-900 dark:text-white"},providers:"space-y-3",form:"space-y-6",footer:"text-sm text-gray-500 dark:text-gray-400 mt-2",default:{submitButton:{label:"Continue"}}})),d=V(),{ui:a,attrs:$}=H("auth.form",N(r,"ui"),l,N(r,"class"),!0),w=K(Object.values(r.fields).reduce((n,{name:g,value:t})=>(n[g]=t,n),{}));return i({formRef:d}),(n,g)=>{var C,F,x,J;const t=ee,o=te,m=se,h=ae,E=ne,p=pe;return c(),f("div",O({class:u(a).wrapper},u($)),[e.icon||n.$slots.icon||e.title||n.$slots.title||e.description||n.$slots.description?(c(),f("div",{key:0,class:v(u(a).base)},[e.icon||n.$slots.icon?(c(),f("div",{key:0,class:v(u(a).icon.wrapper)},[y(n.$slots,"icon",{},()=>[U(t,{name:e.icon,class:v(u(a).icon.base)},null,8,["name","class"])])],2)):b("",!0),e.title||n.$slots.title?(c(),f("p",{key:1,class:v(u(a).title)},[y(n.$slots,"title",{},()=>[z(I(e.title),1)])],2)):b("",!0),e.description||n.$slots.description?(c(),f("p",{key:2,class:v(u(a).description)},[y(n.$slots,"description",{},()=>[z(I(e.description),1)])],2)):b("",!0)],2)):b("",!0),W("div",{class:v(u(a).container)},[(C=e.providers)!=null&&C.length?(c(),f("div",{key:0,class:v(u(a).providers)},[(c(!0),f(R,null,Y(e.providers,(s,A)=>(c(),S(o,O({key:A},s,{block:"",onClick:s.click}),null,16,["onClick"]))),128))],2)):b("",!0),(F=e.providers)!=null&&F.length&&((x=e.fields)!=null&&x.length)?(c(),S(m,{key:1,label:e.divider},null,8,["label"])):b("",!0),(J=e.fields)!=null&&J.length?(c(),S(p,{key:2,ref_key:"formRef",ref:d,state:u(w),schema:e.schema,validate:e.validate,"validate-on":e.validateOn,class:v(u(a).form),onSubmit:g[0]||(g[0]=s=>n.$emit("submit",s.data))},{default:k(()=>[(c(!0),f(R,null,Y(e.fields,s=>(c(),S(E,{key:s.name,label:s.label,description:s.description,help:s.help,hint:s.hint,name:s.name,size:s.size},X({default:k(()=>[U(h,O({modelValue:u(w)[s.name],"onUpdate:modelValue":A=>u(w)[s.name]=A},u(_)(s,["label","description","help","hint","size"])),null,16,["modelValue","onUpdate:modelValue"])]),_:2},[n.$slots[`${s.name}-label`]?{name:"label",fn:k(()=>[y(n.$slots,`${s.name}-label`)]),key:"0"}:void 0,n.$slots[`${s.name}-description`]?{name:"description",fn:k(()=>[y(n.$slots,`${s.name}-description`)]),key:"1"}:void 0,n.$slots[`${s.name}-hint`]?{name:"hint",fn:k(()=>[y(n.$slots,`${s.name}-hint`)]),key:"2"}:void 0,n.$slots[`${s.name}-help`]?{name:"help",fn:k(()=>[y(n.$slots,`${s.name}-help`)]),key:"3"}:void 0]),1032,["label","description","help","hint","name","size"]))),128)),U(o,O({type:"submit",block:"",loading:e.loading},{...u(a).default.submitButton,...e.submitButton}),null,16,["loading"])]),_:3},8,["state","schema","validate","validate-on","class"])):b("",!0)],2),n.$slots.footer?(c(),f("p",{key:1,class:v(u(a).footer)},[y(n.$slots,"footer")],2)):b("",!0)],16)}}});export{$e as _};
